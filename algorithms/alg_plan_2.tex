	\Require начальная ситуация $S_{st}$, целевая ситуация $S_{goal}$, включающая в себя знак мотива $s_{goal}$, функция оценки $\Phi_a$;
	\Ensure план $Plan$;
	\algrule

	\State $Plan=\Call{Planning}{\varnothing,S_{goal}}$;

	\Function{Planning}{$Plan, S_{cur}$}
		\State $F_{goal}=\bigcup\limits_{s\in S_{goal}}\{f(s)\}$; \Comment{множество признаков целевой ситуации}
		\State $F_{cur}=\bigcup\limits_{s\in S_{cur}}\{f(s)\}$; \Comment{множество признаков текущей ситуации планирования}
		\State $F_{cur}^{obj}=\varnothing$; \Comment{множество объектных признаков текущей ситуации ситуации}
		\ForAll $s\in S_{cur}$
			\If{$f(s)\in\mathcal F^{obj}$}
				\State $F_{cur}^{obj}= F_{cur}^{obj}\cup\{f(s)\}$; 
			\EndIf
		\EndFor
		
		\State $M_{cur}=\bigcup\limits_{f\in F_{cur}^{obj}}m(f)$;
		\State $\Delta=F_{goal}\setminus F_{cur}$; \Comment{текущая невязка состояний}
		
		\State $M_{forw}\subseteq M_{cur}:\begin{cases}
			\left|\bigcup\limits_{\mu\in M_{forw}}\left(F_A(\mu)\setminus\Delta\right)\right|\rightarrow\max,\\
			\left|\bigcap\limits_{\mu\in M_{forw}}\left(F_A(\mu)\setminus\Delta\right)\right|\rightarrow\min;
		\end{cases}$ \Comment{решение minmax задачи}
		
		\State $A_{forw} = \bigcup\limits_{\mu\in M_{forw}}\{\Call{Interior}{\mu}\}$; \Comment{текущее множестов личностных смыслов}
				
		\ForAll $a_j\in A_{forw}$
			\If{$\exists a_k\in A_{forw}$ такой, что $a_k\not =a_i$ и $a_k$ конфликтует с $a_j$}
				\State $a_{del}=\argmin\limits_{a\in\{a_k,a_j\}}|F_A(a)\setminus\Delta|$;
				\State $A_{forw}= A_{forw}\setminus\{a_{del}\}$; \Comment{удаляем конфликтующие признаки}
			\EndIf
		\EndFor
		
		\State $\tilde A_{forw}=\Phi_a(A_{forw},f_{goal})$; \Comment{выбор предпочитаемых действий}
		
		\State $F_{next}=F_{st}\cup\left(\bigcup\limits_{a\in \tilde A_{forw}}F_C(a)\right)\setminus\bigcup\limits_{a\in \tilde A_{forw}}F_D(a)$; \Comment{следующая ситуация планирования}
		
		\If{$\left(\bigcup\limits_{a\in \tilde A_{forw}}F_C(a)\right)\subseteq F_{st}$ и $F_{goal}\subseteq F_{next}$}
			\State \Return $Plan\cup{\tilde A_{forw}}$;		\Comment{возвращаем обновленный план}
		\Else
			\If{$F_{next}=F_{cur}$}
				\State\Return невозможно построить план;
			\Else
				\State \Return \Call{Planning}{$Plan, \bigcup\limits_{f\in \tilde A_{forw}}F_C(a)$};						
			\EndIf
		\EndIf

	\EndFunction