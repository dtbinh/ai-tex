\Function{map\_iteration}{$z_{cur}$,$z_{start}$, $Plan_{cur}$, $i$}
	\If{$i \geq i_{max}$}\label{alst:exit}
		\State\Return $\varnothing$
	\EndIf
	
	\State $\hat A_{case}:=\varnothing$ \Comment{Список прецедентов}
	
	\Statex\Comment{$S$-этап}
	\Statex\Comment{Поиск прецедентов выполнения действий в текущих условиях}
		
	\ForAll{$s\in S$} \label{alst:check_wm}
		\ForAll{$z_a\in a(s)$}\label{alst:check_a}
			\If{$z_a \geq z_{cur}$}
				\State $\hat A_{case} = \hat A_{case} \cup \varphi_a^\uparrow(s,d_a)$ \label{alst:search_case}
			\EndIf
		\EndFor
	\EndFor