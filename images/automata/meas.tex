\documentclass[preview,convert={density=600,outext=.png},border=3pt]{standalone}
%\documentclass[preview,border=3pt]{standalone}

\usepackage[T2A]{fontenc}				% Поддержка русских букв
\usepackage[utf8]{inputenc}				% Кодировка utf8
\usepackage[english, russian]{babel}	% Языки: русский, английский

\usepackage{tikz}
\usetikzlibrary{calc}

\begin{document}
	
	\begin{tikzpicture}

		\node[draw, rectangle, minimum width = 60, minimum height = 40] (low_auto) at (0,0) {$R_i^j$};
		\node[draw, dotted, rectangle, minimum width = 60, minimum height = 60,fill=white] at (-0.5,4.4) {};
		\node[draw, dotted, rectangle, minimum width = 60, minimum height = 60,fill=white] at (-0.35,4.3) {};
		\node[draw, dotted, rectangle, minimum width = 60, minimum height = 60,fill=white] (hi_pred) at (-0.2,4.2) {};
		\node[draw, rectangle, minimum width = 120, minimum height = 100, align = right] (hi_auto) at (0,4) {};
		
		\node at (1.6,2.6) {$R_q^{j+1}$};
		\node at (-1,3.4) {$Z_r^2$};
		\node at (1.3,5.3) {$Z_2$};
		
		\draw[->] ([xshift=-19.5]low_auto.north) -- ++(0,0.5);
		\draw[->] ([xshift=-11.5]low_auto.north) -- ++(0,0.5);
		\draw[->] ([xshift=-3.5]low_auto.north) -- ++(0,0.5);
		\draw[->] ([xshift=4.5]low_auto.north) -- ++(0,0.5);
		\draw[->,gray, rounded corners] ([xshift=12.5]low_auto.north) -| ++(0,1.9) node[black, right] {$f_1$} -- ++(-2.3,0) |- ([xshift=25]hi_pred.west);
		\draw[->] ([xshift=20.5]low_auto.north) -- ++(0,0.5) node[right] {$F_i^{*j}$} ;
				
		\draw[<-] ([xshift=-30]hi_auto.south) -- ++(0,-0.5);
		\draw[<-] ([xshift=-15]hi_auto.south) -- ++(0,-0.5);
		\draw[<-] ([xshift=0]hi_auto.south) -- ++(0,-0.5);
		\draw[<-] ([xshift=25]hi_auto.south) -- ++(0,-0.5);
		\draw[<-] ([xshift=40]hi_auto.south) -- ++(0,-0.5) node[right] {$F_q^{j+1}$};

		\draw[->] ([xshift=-30]hi_auto.north) -- ++(0,0.5) node[left] {$F_q^{*j+1}$};
		\draw[->] ([xshift=-15]hi_auto.north) -- ++(0,0.5);
		\draw[->,gray] ([xshift=0, yshift=-9]hi_auto.north) -- ++(0,1) node[right,black] {$f_2$};
		\draw[->] ([xshift=15]hi_auto.north) -- ++(0,0.5);		
		\draw[->] ([xshift=30]hi_auto.north) -- ++(0,0.5);
		\draw[->] ([xshift=45]hi_auto.north) -- ++(0,0.5);
				

		
		\draw ([xshift=-5]hi_pred.north) -- ([xshift=-5]hi_pred.south);
		\node at (-0.25,2.9) {$\bar z_u^r$};
		\draw (hi_pred.north) -- (hi_pred.south);
		
		\draw (-0.37,4.3) -- (-0.2,4.3);
		\draw (-0.37,4.1) -- (-0.2,4.1);
		\fill [gray] (-0.35,4.12) rectangle (-0.22,4.28);
		\scriptsize
		\node at (0.3,4.2) {$z_{uv}^r=1$};
		
	\end{tikzpicture}
\end{document}