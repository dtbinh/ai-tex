\documentclass[tikz,border=3pt,convert={density=1200,outext=.png}]{standalone}
%\documentclass[tikz,border=3pt]{standalone}

\usepackage[utf8]{inputenc} % utf8 encoding
\usepackage{amsmath,amsfonts} % nice math symbols

\usepackage{tikz}
\usetikzlibrary{arrows,shapes,calc}

\begin{document}
	\newcommand{\predmatr}[3]{
		\node[ell, rectangle, minimum height = 15, minimum width = 7.5]  at (#1 pt,#2 pt) {}; 
		\node[ellf, rectangle, minimum height = 15, minimum width = 7.5] at (#1+7.5 pt,#2 pt) {};
		\node[minimum height = 15, minimum width = 15] (#3) at (#1+3.3pt,#2 pt) {};
		\draw[ell] (#1+7.5 pt,#2+7.5 pt) -- (#1 +7.5 pt,#2-7.5 pt);
	}
	
	\begin{tikzpicture}
		\tikzstyle{ell}=[draw, thick, align=center, color=blue]
		\tikzstyle{ellf}=[draw, thick, align=center, color=blue, fill=blue]	
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (bt) at (2.5 pt, 130 pt){};
		\predmatr{0}{130}{newact}
		\node at (30 pt, 150 pt) {``build tower''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (aot) at (-67.5 pt, 80 pt){};
		\predmatr{-70}{80}{c1}
		\node at (-70 pt, 65 pt) {``tower ABCD''};		
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (tower) at (42.5 pt, 80 pt){};
		\predmatr{40}{80}{tower1}			
		\node at (93 pt, 90 pt) {``tower ABCDE''};	
		
		\path[-latex'] ([xshift=-7]aot.north) edge [out = 100, in = 180] node[above, black] {\scriptsize 1} node[left, black, very near start] {\scriptsize 1} ([yshift=3]newact.west);
		
		
		\path[-latex'] ([xshift=-5]tower.north) edge [out = 90, in = -70] node[above, black] {\scriptsize -1} node[above, black, very near start] {\scriptsize 1} ([xshift=3]newact.south);
		
		
		\node[ell, ellipse, minimum height = 30, minimum width = 100] (on) at (14pt,0){};
		\predmatr{-20}{0}{on1}
		\predmatr{0}{0}{on2}
		\predmatr{20}{0}{on3}
		\predmatr{40}{0}{on4}	
		\node at (30 pt, 20 pt) {``on''};
		
		\node[ell, ellipse, minimum height = 30, minimum width = 120] (bx) at (23 pt,-70pt){};
		\predmatr{-20}{-70}{block1}
		\predmatr{0}{-70}{block2}
		\predmatr{20}{-70}{block3}	
		\predmatr{40}{-70}{block4}
		\predmatr{60}{-70}{block5}
		\node at (45 pt, -90 pt) {``block?x''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (clear) at (92.5 pt, 120 pt){};
		\predmatr{90}{120}{clear1}
		\node at (110 pt, 105 pt) {``clear''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 60] (ontable) at (102.5 pt, 50 pt){};
		\predmatr{90}{50}{ontable1}
		\predmatr{110}{50}{ontable2}
		\node at (110 pt, 35 pt) {``ontable''};
		

		\path[-latex', ] ([xshift=-30]bx.north) edge [bend left, out = 10, in = 170] node[left, black, near end] {\scriptsize 1} node[left, black, very near start] {\scriptsize 1} ([xshift=-4]on1.south);		
		\path[-latex', ] ([xshift=-20]bx.north) edge [bend left, out = 10, in = 190] node[left, black, near end] {\scriptsize -1} node[left, black, near start] {\scriptsize 2} ([xshift=4]on1.south);

	
		\path[-latex', ] ([xshift=-10]bx.north) edge [bend right, out = 10, in = 170] node[left, black, near end] {\scriptsize 1} node[left, black, very near start] {\scriptsize 2} ([xshift=-4]on2.south);	
		\path[-latex', ] ([xshift=-5]bx.north) edge [bend left, out = 10, in = 190] node[left, black,near end] {\scriptsize -1} node[left, black, very near start] {\scriptsize 3} ([xshift=4]on2.south);

		
		\path[-latex', ] ([xshift=10]bx.north) edge [bend right, out = -10, in = 180] node[above, black] {\scriptsize -1} node[right, black, near start] {\scriptsize 3} ([xshift=4]on3.south);
		\path[-latex', ] ([xshift=5]bx.north) edge [bend right, out = -10, in = 140] node[right, black] {\scriptsize 1} node[right, black, very near start] {\scriptsize 4} ([xshift=-4]on3.south);		

		\path[-latex', ] ([xshift=30]bx.north) edge [bend right, out = -10, in = 150] node[right, black, near end] {\scriptsize -1} node[right, black, very near start] {\scriptsize 4} ([xshift=4]on4.south);
		\path[-latex', ] ([xshift=20]bx.north) edge [bend right, out = -10, in = 150] node[right, black] {\scriptsize 1} node[right, black, very near start] {\scriptsize 5} ([xshift=-4]on4.south);
		
		
						
		\path[-latex', ] ([xshift=30,yshift=-2]bx.north) edge [bend left, out = -60, in = 210] node[left, black, xshift=8] {\scriptsize 4} node[left, black, near start] {\scriptsize 5} ([xshift=-4]tower1.south);
		\path[-latex', ] ([xshift=35,yshift=-2]bx.north) edge [bend right, out = -70, in = 220] node[right, black, near end] {\scriptsize 5} node[right, black, very near start] {\scriptsize 1} ([xshift=-2]tower1.south);
		
		\path[-latex', ] ([xshift=-40,yshift=-2]bx.north) edge [bend left, out = 60, in = 180] node[left, black, xshift=8] {\scriptsize 2} node[left, black, near start] {\scriptsize 1} ([xshift=-4]newact.south);
		\path[-latex', ] ([yshift=-2]ontable.west) edge [bend right, out = 70, in = 150] node[left, black, near end] {\scriptsize 2} node[left, black, very near start] {\scriptsize 2} ([xshift=-2]newact.south);
		
		
		\path[-latex', ] ([xshift=5]on.north) edge [out = 100, in = 180] node[left, near end, black, xshift=1] {\scriptsize 1} node[left, black,very near start, xshift=1] {\scriptsize 1} ([yshift=-4]tower1.west);
		\path[-latex', ] ([xshift=-5]on.north) edge [bend right, out = 90, in = 120] node[above, black] {\scriptsize 2} node[above, black, near start] {\scriptsize 2} ([yshift=0]tower1.west);
		\path[-latex', ] ([xshift=-15]on.north) edge [bend right, out = 90, in = 120] node[above, black] {\scriptsize 3} node[above, black, near start] {\scriptsize 3} ([yshift=4]tower1.west);	
		
		\path[-latex', ] (clear.west) edge [out = 180, in = 90] node[above, black, near end] {\scriptsize 6} node[above, black, near start] {\scriptsize 1} ([xshift=-2]tower1.north);		
		\path[-latex', ] (ontable.west) edge [bend right, out = 20, in = 120] node[left, black] {\scriptsize 4} node[above, black, near start] {\scriptsize 1} ([xshift=-4]tower1.south);		
	\end{tikzpicture}

\end{document}