%\documentclass[tikz,border=3pt,convert={density=600,outext=.png}]{standalone}
\documentclass[tikz,border=3pt]{standalone}

\usepackage[utf8]{inputenc} % utf8 encoding
\usepackage{amsmath,amsfonts} % nice math symbols

\usepackage{tikz}
\usetikzlibrary{arrows,shapes,calc}

\begin{document}
	\newcommand{\predmatr}[3]{
		\node[ell, rectangle, minimum height = 15, minimum width = 7.5]  at (#1 pt,#2 pt) {}; 
		\node[ellf, rectangle, minimum height = 15, minimum width = 7.5] at (#1+7.5 pt,#2 pt) {};
		\node[minimum height = 15, minimum width = 15] (#3) at (#1+3.3pt,#2 pt) {};
		\draw[ell] (#1+7.5 pt,#2+7.5 pt) -- (#1 +7.5 pt,#2-7.5 pt);
	}
	\begin{tikzpicture}
		\tikzstyle{ell}=[draw, thick, align=center, color=green!70!black]
		\tikzstyle{ellf}=[draw, thick, align=center, color=green!70!black, fill=green!70!black]
		
		\node[ell, ellipse, minimum height = 30, minimum width = 80] (on) at (5 pt,0){};
		\predmatr{-20}{0}{on1}
		\predmatr{0}{0}{on2}
		\predmatr{20}{0}{on3}	
		\node at (25 pt, 20 pt) {``on''};
		
		\node[ell, ellipse, minimum height = 25, minimum width = 60] (a) at (-105 pt, -50 pt){};
		\predmatr{-120}{-50}{a1}
		\predmatr{-100}{-50}{a2}
		\node at (-85 pt, -35 pt) {``a''};

		\node[ell, ellipse, minimum height = 25, minimum width = 60] (b) at (-35 pt, -50 pt){};
		\predmatr{-50}{-50}{b1}
		\predmatr{-30}{-50}{b2}
		\node at (-15 pt, -35 pt) {``b''};
		
		\node[ell, ellipse, minimum height = 25, minimum width = 60] (c) at (45 pt, -50 pt){};
		\predmatr{30}{-50}{c1}
		\predmatr{50}{-50}{c2}
		\node at (65 pt, -35 pt) {``c''};
		
		\node[ell, ellipse, minimum height = 25, minimum width = 60] (d) at (115 pt, -50 pt){};
		\predmatr{120}{-50}{d1}
		\predmatr{100}{-50}{d2}
		\node at (135 pt, -35 pt) {``d''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (goal) at (32.5 pt, 50 pt){};
		\predmatr{30}{50}{goal1}
		\node at (60 pt, 40 pt) {``goal''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (clear) at (92.5 pt, 70 pt){};
		\predmatr{90}{70}{clear1}
		\node at (110 pt, 55 pt) {``clear''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (ontable) at (-67.5 pt, 60 pt){};
		\predmatr{-70}{60}{ontable1}
		\node at (-115 pt, 60 pt) {``ontable''};
		
		
		\path[-latex', ] ([xshift=5]a.north) edge [bend left, out = 50, in = 130] node[above, black, very near end] {\scriptsize -1} node[above, black, very near start] {\scriptsize 1} ([xshift=4]on1.north);
		\path[-latex', ] ([xshift=-5]a.north) edge [bend left, out = 50, in = 180] node[above, black, xshift=8] {\scriptsize 4} node[above, black, very near start] {\scriptsize 2} ([xshift=-4]goal1.south);

		\path[-latex', ] ([xshift=-5]b.north) edge [bend left, out = 50, in = 180] node[above, black, near end] {\scriptsize 1} node[above, black, very near start] {\scriptsize 1} ([xshift=-4]on1.south);
		\path[-latex', ] ([xshift=5]b.north) edge [bend left, out = 50, in = 210] node[above, black] {\scriptsize -1} node[above, black, very near start] {\scriptsize 2} ([xshift=4]on2.south);
		
		\path[-latex', ] ([xshift=-7]c.north) edge [bend right, out = -50, in = 100] node[above, black] {\scriptsize 1} node[above, black, very near start] {\scriptsize 1} ([xshift=-4]on2.south);
		\path[-latex', ] ([xshift=7]c.north) edge [bend right, out = -40, in = 180] node[above, black] {\scriptsize -1} node[above, black, very near start] {\scriptsize 2} ([xshift=4]on3.south);
		
		\path[-latex', ] ([xshift=-7]d.north) edge [bend right, out = -50, in = 140] node[above, black] {\scriptsize 1} node[above, black, very near start] {\scriptsize 1} ([xshift=-4]on3.south);
		\path[-latex', ] ([xshift=7]d.north) edge [bend right, out = -50, in = 150] node[above, black, near end] {\scriptsize 5} node[above, black, very near start] {\scriptsize 2} ([xshift=-2]goal1.south);
		
		\path[-latex', ] ([xshift=5]on.north) edge [out = 100, in = 180] node[above, black] {\scriptsize 1} node[above, black,very near start, xshift=-2] {\scriptsize 1} ([yshift=-4]goal1.west);
		\path[-latex', ] ([xshift=-5]on.north) edge [bend right, out = 90, in = 120] node[above, black] {\scriptsize 2} node[above, black, near start] {\scriptsize 2} ([yshift=0]goal1.west);
		\path[-latex', ] ([xshift=-15]on.north) edge [bend right, out = 90, in = 120] node[above, black] {\scriptsize 3} node[above, black, near start] {\scriptsize 3} ([yshift=4]goal1.west);	
		
		\path[-latex', ] (clear.west) edge [out = 180, in = 90] node[above, black, near end] {\scriptsize 4} node[above, black, near start] {\scriptsize 1} ([xshift=-2]goal1.north);		
		\path[-latex', ] (ontable.east) edge [bend right, out = 20, in = 120] node[above, black, near end] {\scriptsize 5} node[above, black, near start] {\scriptsize 1} ([xshift=-4]goal1.north);			
	\end{tikzpicture}

	\begin{tikzpicture}
		\tikzstyle{ell}=[draw, thick, align=center, color=blue]
		\tikzstyle{ellf}=[draw, thick, align=center, color=blue, fill=blue]

		\node[ell, ellipse, minimum height = 30, minimum width = 100] (block) at (5 pt,0){};
		\predmatr{-30}{0}{block1}
		\predmatr{-10}{0}{block2}
		\predmatr{10}{0}{block3}	
		\predmatr{30}{0}{block4}
		\node at (35 pt, 20 pt) {``block''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (a) at (-75 pt, -50 pt){};
		\predmatr{-80}{-50}{a1}
		\node at (-100 pt, -35 pt) {``a''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (b) at (-25 pt, -50 pt){};
		\predmatr{-30}{-50}{b1}
		\node at (-50 pt, -35 pt) {``b''};		
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (c) at (35 pt, -50 pt){};
		\predmatr{30}{-50}{c1}
		\node at (10 pt, -35 pt) {``c''};		
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (d) at (85 pt, -50 pt){};
		\predmatr{80}{-50}{d1}			
		\node at (60 pt, -35 pt) {``d''};	
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (x) at (-37.5 pt, 50 pt){};
		\predmatr{-40}{50}{x1}
		\node at (-70 pt, 65 pt) {``block?x''};			

		\node[ell, ellipse, minimum height = 20, minimum width = 40] (y) at (42.5 pt, 50 pt){};
		\predmatr{40}{50}{y1}	
		\node at (85 pt, 50 pt) {``block?y''};			
				
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (stack) at (2.5 pt, 100 pt){};
		\predmatr{0}{100}{stack1}
		\node at (25 pt, 115 pt) {``stack''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (on) at (82.5 pt, 100 pt){};
		\predmatr{80}{100}{on1}
		\node at (115 pt, 100 pt) {``on''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (holding) at (-77.5 pt, 120 pt){};
		\predmatr{-80}{120}{holding1}
		\node at (-125 pt, 120 pt) {``holding''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (clear) at (-77.5 pt, 90 pt){};
		\predmatr{-80}{90}{clear1}
		\node at (-120 pt, 90 pt) {``clear''};
		
		
		
		\path[-latex'] (a.north) edge [out = 90, in = -120] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block1.south);
		\path[-latex'] (b.north) edge [out = 90, in = -120] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block2.south);
		\path[-latex'] (c.north) edge [out = 90, in = -80] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block3.south);
		\path[-latex'] (d.north) edge [out = 90, in = -80] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block4.south);		
		
		\path[-latex'] ([xshift=-10]block.north) edge [out = 90, in = -80] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 0} ([xshift=-3]x1.south);
		\path[-latex'] ([xshift=10]block.north) edge [out = 90, in = -100] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 0} ([xshift=-3]y1.south);
		
		\path[-latex'] (x.north) edge [out = 90, in = -100] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-5]stack1.south);
		\path[-latex'] (y.north) edge [out = 90, in = -80] node[below, black, near end] {\scriptsize 2} node[above, black, near start] {\scriptsize 1} ([xshift=-2]stack1.south);	
		
		\path[-latex'] (clear.east) edge [out = 0, in = -180] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([yshift=-3]stack1.west);
		\path[-latex'] (holding.east) edge [out = 0, in = -180] node[above, black, near end] {\scriptsize 2} node[above, black, near start] {\scriptsize 1} ([yshift=3]stack1.west);
		\path[-latex'] (on.west) edge [out = -180, in = 0] node[above, black, near end] {\scriptsize -1} node[above, black, near start] {\scriptsize 1} ([yshift=-3]stack1.east);
		
		\path[-latex'] ([xshift=10]x.north) edge [out = 60, in = -140] node[above, black, near end] {\scriptsize 1} node[above, black, very near start] {\scriptsize 1} ([xshift=-3]on1.south);	
		\path[-latex'] ([xshift=10]y.north) edge [out = 70, in = -70] node[below, black, near end] {\scriptsize -1} node[above, black, very near start] {\scriptsize 1} ([xshift=3]on1.south);	
	\end{tikzpicture}
	
	\begin{tikzpicture}
		\tikzstyle{ell}=[draw, thick, align=center, color=green!70!black]
		\tikzstyle{ellf}=[draw, thick, align=center, color=green!70!black, fill=green!70!black]
		
		\node[ell, ellipse, minimum height = 25, minimum width = 60] (a) at (-105 pt, -50 pt){};
		\predmatr{-120}{-50}{a1}
		\predmatr{-100}{-50}{a2}
		\node at (-85 pt, -35 pt) {``a''};
		
		\node[ell, ellipse, minimum height = 25, minimum width = 60] (b) at (-35 pt, -50 pt){};
		\predmatr{-50}{-50}{b1}
		\predmatr{-30}{-50}{b2}
		\node at (-15 pt, -35 pt) {``b''};
		
		\node[ell, ellipse, minimum height = 25, minimum width = 60] (c) at (45 pt, -50 pt){};
		\predmatr{30}{-50}{c1}
		\predmatr{50}{-50}{c2}
		\node at (65 pt, -35 pt) {``c''};
		
		\node[ell, ellipse, minimum height = 25, minimum width = 60] (d) at (115 pt, -50 pt){};
		\predmatr{120}{-50}{d1}
		\predmatr{100}{-50}{d2}
		\node at (135 pt, -35 pt) {``d''};
		
		\node[ell, ellipse, minimum height = 30, minimum width = 100] (clear) at (-115 pt,90 pt){};
		\predmatr{-150}{90}{clear1}
		\predmatr{-130}{90}{clear2}
		\predmatr{-110}{90}{clear3}	
		\predmatr{-90}{90}{clear4}
		\node at (-85 pt, 110 pt) {``clear''};		
		
		\node[ell, ellipse, minimum height = 30, minimum width = 100] (ontable) at (125 pt,90 pt){};
		\predmatr{150}{90}{ontable1}
		\predmatr{130}{90}{ontable2}
		\predmatr{110}{90}{ontable3}	
		\predmatr{90}{90}{ontable4}
		\node at (85 pt, 110 pt) {``ontable''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (start) at (82.5 pt, 40 pt){};
		\predmatr{80}{40}{start1}
		\node at (120 pt, 40 pt) {``start''};
		
		\path[-latex'] ([xshift=-5]a.north) edge [out = 90, in = -160] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([yshift=-4]start1.west);
		\path[-latex'] ([xshift=5]a.north) edge [out = 90, in = -160] node[above, black, very near end] {\scriptsize 2} node[above, black, very near start] {\scriptsize 2} ([yshift=-6]start1.west);
		
		\path[-latex'] ([xshift=-5]b.north) edge [out = 90, in = -130] node[above, black, near end] {\scriptsize 3} node[above, black, near start] {\scriptsize 1} ([xshift=-4]start1.south);
		\path[-latex'] ([xshift=5]b.north) edge [out = 90, in = -130] node[above, black, very near end] {\scriptsize 4} node[above, black, very near start] {\scriptsize 2} ([xshift=-2]start1.south);
		
		\path[-latex'] ([xshift=-5]c.north) edge [out = 90, in = -100] node[above, black, near end] {\scriptsize 5} node[above, black, near start] {\scriptsize 1} ([xshift=-4]start1.south);
		\path[-latex'] ([xshift=5]c.north) edge [out = 90, in = -100] node[above, black, very near end] {\scriptsize 6} node[above, black, very near start] {\scriptsize 2} ([xshift=-2]start1.south);
		
		\path[-latex'] ([xshift=-5]d.north) edge [out = 90, in = -60] node[above, black, near end] {\scriptsize 7} node[above, black, near start] {\scriptsize 1} ([xshift=-1]start1.south);
		\path[-latex'] ([xshift=5]d.north) edge [out = 90, in = -60] node[above, black, very near end] {\scriptsize 8} node[above, black, very near start] {\scriptsize 2} ([xshift=0]start1.south);
		
		\path[-latex'] ([xshift=-10]clear.south) edge [out = -70, in = 190] node[right, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 2} ([yshift=-2]start1.west);
		\path[-latex'] ([xshift=-5]clear.south) edge [out = -70, in = 180] node[above, black, very near end] {\scriptsize 3} node[above, black, very near start] {\scriptsize 3} ([yshift=0]start1.west);
		\path[-latex'] ([xshift=10]clear.south) edge [out = -60, in = 170] node[above, black, near end] {\scriptsize 5} node[above, black, near start] {\scriptsize 5} ([yshift=4]start1.west);
		\path[-latex'] ([xshift=5]clear.south) edge [out = -60, in = 180] node[above, black, very near end] {\scriptsize 7} node[above, black, very near start] {\scriptsize 4} ([yshift=2]start1.west);
		
		\path[-latex'] ([xshift=-15]ontable.south) edge [out = -90, in = 90] node[above, black, very near end] {\scriptsize 2} node[above, black, near start] {\scriptsize 2} ([xshift=-6]start1.north);
		\path[-latex'] ([xshift=-5]ontable.south) edge [out = -90, in = 80] node[above, black, near end] {\scriptsize 4} node[above, black, near start] {\scriptsize 3} ([xshift=-4]start1.north);
		\path[-latex'] ([xshift=5]ontable.south) edge [out = -90, in = 70] node[above, black, near end] {\scriptsize 6} node[above, black, near start] {\scriptsize 4} ([xshift=-2]start1.north);
		\path[-latex'] ([xshift=15]ontable.south) edge [out = -90, in = 60] node[above, black, near end] {\scriptsize 8} node[above, black, near start] {\scriptsize 5} ([xshift=0]start1.north);
	\end{tikzpicture}
	
	\begin{tikzpicture}
		\tikzstyle{ell}=[draw, thick, align=center, color=blue]
		\tikzstyle{ellf}=[draw, thick, align=center, color=blue, fill=blue]
		
		\node[ell, ellipse, minimum height = 30, minimum width = 100] (block) at (5 pt,0){};
		\predmatr{-30}{0}{block1}
		\predmatr{-10}{0}{block2}
		\predmatr{10}{0}{block3}	
		\predmatr{30}{0}{block4}
		\node at (35 pt, 20 pt) {``block''};
		
		\tikzstyle{ell}=[draw, thick, align=center, color=green!70!black]
		\tikzstyle{ellf}=[draw, thick, align=center, color=green!70!black, fill=green!70!black]
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (a) at (-77.5 pt, -50 pt){};
		\predmatr{-80}{-50}{a1}
		\node at (-100 pt, -35 pt) {``a''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (b) at (-27.5 pt, -50 pt){};
		\predmatr{-30}{-50}{b1}
		\node at (-50 pt, -35 pt) {``b''};		

		\node[ell, ellipse, minimum height = 20, minimum width = 40] (unstack) at (2.5 pt, 100 pt){};
		\predmatr{0}{100}{unstack1}
		\node at (-15 pt, 120 pt) {``unstack''};

		\node[ell, ellipse, minimum height = 20, minimum width = 40] (on) at (-77.5 pt, 100 pt){};
		\predmatr{-80}{100}{on1}
		\node at (-115 pt, 100 pt) {``on''};

		\node[ell, ellipse, minimum height = 20, minimum width = 40] (holding) at (82.5 pt, 120 pt){};
		\predmatr{80}{120}{holding1}
		\node at (125 pt, 120 pt) {``holding''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (clear) at (82.5 pt, 90 pt){};
		\predmatr{80}{90}{clear1}
		\node at (120 pt, 90 pt) {``clear''};
						
		\tikzstyle{ell}=[draw, thick, align=center, color=blue]
		\tikzstyle{ellf}=[draw, thick, align=center, color=blue, fill=blue]
				
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (c) at (32.5 pt, -50 pt){};
		\predmatr{30}{-50}{c1}
		\node at (10 pt, -35 pt) {``c''};		
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (d) at (82.5 pt, -50 pt){};
		\predmatr{80}{-50}{d1}			
		\node at (60 pt, -35 pt) {``d''};	
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (x) at (-37.5 pt, 50 pt){};
		\predmatr{-40}{50}{x1}
		\node at (-85 pt, 50 pt) {``block?x''};			
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (y) at (42.5 pt, 50 pt){};
		\predmatr{40}{50}{y1}	
		\node at (85 pt, 50 pt) {``block?y''};			

		\path[-latex', very thick] (a.north) edge [out = 90, in = -120] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block1.south);
		\path[-latex', very thick] (b.north) edge [out = 90, in = -120] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block2.south);
		\path[-latex'] (c.north) edge [out = 90, in = -80] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block3.south);
		\path[-latex'] (d.north) edge [out = 90, in = -80] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block4.south);		
		
		\path[-latex', very thick] ([xshift=-10]block.north) edge [out = 90, in = -80] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 0} ([xshift=-3]x1.south);
		\path[-latex', very thick] ([xshift=10]block.north) edge [out = 90, in = -100] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 0} ([xshift=-3]y1.south);
		
		\path[-latex', very thick] (x.north) edge [out = 90, in = -100] node[above, black, near end] {\scriptsize -1} node[above, black, near start] {\scriptsize 1} ([xshift=2]unstack1.south);
		\path[-latex', very thick] (y.north) edge [out = 90, in = -80] node[above, black, near end] {\scriptsize -2} node[above, black, near start] {\scriptsize 1} ([xshift=5]unstack1.south);	
		
		\path[-latex', very thick] (clear.west) edge [out = 180, in = 0] node[above, black, near end] {\scriptsize -2} node[above, black, near start] {\scriptsize 1} ([yshift=-3]unstack1.east);
		\path[-latex', very thick] (holding.west) edge [out = 180, in = 0] node[above, black, near end] {\scriptsize -1} node[above, black, near start] {\scriptsize 1} ([yshift=3]unstack1.east);
		\path[-latex', very thick] (on.east) edge [out = 0, in = 180] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([yshift=-3]unstack1.west);
		
		\path[-latex', very thick] ([xshift=-10]x.north) edge [out = 100, in = -140] node[above, black] {\scriptsize 1} node[above, black, very near start] {\scriptsize 1} ([xshift=-3]on1.south);	
		\path[-latex', very thick] ([xshift=-10]y.north) edge [out = 150, in = -30] node[above, black, near end] {\scriptsize -1} node[above, black, very near start] {\scriptsize 1} ([xshift=3]on1.south);	
	\end{tikzpicture}	
	
	\begin{tikzpicture}
		\tikzstyle{ell}=[draw, thick, align=center, color=blue]
		\tikzstyle{ellf}=[draw, thick, align=center, color=blue, fill=blue]
		
		\node[ell, ellipse, minimum height = 30, minimum width = 100] (block) at (5 pt,0){};
		\predmatr{-30}{0}{block1}
		\predmatr{-10}{0}{block2}
		\predmatr{10}{0}{block3}	
		\predmatr{30}{0}{block4}
		\node at (35 pt, 20 pt) {``block''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (c) at (32.5 pt, -50 pt){};
		\predmatr{30}{-50}{c1}
		\node at (10 pt, -35 pt) {``c''};		
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (d) at (82.5 pt, -50 pt){};
		\predmatr{80}{-50}{d1}			
		\node at (60 pt, -35 pt) {``d''};	
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (x) at (-37.5 pt, 50 pt){};
		\predmatr{-40}{50}{x1}
		\node at (-85 pt, 50 pt) {``block?x''};			
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (y) at (42.5 pt, 50 pt){};
		\predmatr{40}{50}{y1}	
		\node at (85 pt, 50 pt) {``block?y''};
		
		\path[-latex'] (c.north) edge [out = 90, in = -80] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block3.south);
		\path[-latex'] (d.north) edge [out = 90, in = -80] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block4.south);
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (a) at (-77.5 pt, -50 pt){};
		\predmatr{-80}{-50}{a1}
		\node at (-100 pt, -35 pt) {``a''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (b) at (-27.5 pt, -50 pt){};
		\predmatr{-30}{-50}{b1}
		\node at (-50 pt, -35 pt) {``b''};
		\path[-latex'] (a.north) edge [out = 90, in = -120] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block1.south);
		\path[-latex'] (b.north) edge [out = 90, in = -120] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([xshift=-3]block2.south);
		\path[-latex'] ([xshift=-10]block.north) edge [out = 90, in = -80] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 0} ([xshift=-3]x1.south);
		\path[-latex'] ([xshift=10]block.north) edge [out = 90, in = -100] node[above, black] {\scriptsize 1} node[above, black, near start] {\scriptsize 0} ([xshift=-3]y1.south);
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (unstack) at (2.5 pt, 100 pt){};
		\predmatr{0}{100}{unstack1}
		\node at (-15 pt, 120 pt) {``unstack''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (on) at (-77.5 pt, 100 pt){};
		\predmatr{-80}{100}{on1}
		\node at (-115 pt, 100 pt) {``on''};
		
		\path[-latex'] (x.north) edge [out = 90, in = -100] node[above, black, near end] {\scriptsize -1} node[above, black, near start] {\scriptsize 1} ([xshift=2]unstack1.south);
		\path[-latex'] (y.north) edge [out = 90, in = -80] node[above, black, near end] {\scriptsize -2} node[above, black, near start] {\scriptsize 1} ([xshift=5]unstack1.south);
		\path[-latex'] (on.east) edge [out = 0, in = 180] node[above, black, near end] {\scriptsize 1} node[above, black, near start] {\scriptsize 1} ([yshift=-3]unstack1.west);
		
		\path[-latex'] ([xshift=-10]x.north) edge [out = 100, in = -140] node[above, black] {\scriptsize 1} node[above, black, very near start] {\scriptsize 1} ([xshift=-3]on1.south);	
		\path[-latex'] ([xshift=-10]y.north) edge [out = 150, in = -30] node[above, black, near end] {\scriptsize -1} node[above, black, very near start] {\scriptsize 1} ([xshift=3]on1.south);
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (holding) at (82.5 pt, 120 pt){};
		\predmatr{80}{120}{holding1}
		\node at (125 pt, 120 pt) {``holding''};
		
		\node[ell, ellipse, minimum height = 20, minimum width = 40] (clear) at (82.5 pt, 90 pt){};
		\predmatr{80}{90}{clear1}
		\node at (120 pt, 90 pt) {``clear''};
		
		\path[-latex'] (clear.west) edge [out = 180, in = 0] node[above, black, near end] {\scriptsize -2} node[above, black, near start] {\scriptsize 1} ([yshift=-3]unstack1.east);
		\path[-latex'] (holding.west) edge [out = 180, in = 0] node[above, black, near end] {\scriptsize -1} node[above, black, near start] {\scriptsize 1} ([yshift=3]unstack1.east);
	\end{tikzpicture}
\end{document}